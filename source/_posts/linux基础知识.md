---
title: linux基础知识
date: 2019-03-06 20:27:09
tags: [linux]
---

# 文件管理

> 文件管理是操作系统的基本功能，主要包括对文件和目录的创建、查看、修改、删除 4 类操作。

## 文件创建

1.  touch 方式创建文件

    > touch 命令的主要功能是将已存在文件的时间属性更新为当前系统时间，若指定文件不存在，则会创建一个新的文件。
    > 通过 ls 命令选项-l 可以查看文件的修改时间，ls -l 还可以缩写为 ll 命令

1.  重定向方式创建文件

通过 `>` `>>` 两种符号实现重定向 `>` 是覆盖方式(文件存在时，覆盖文件) `>>` 追加方式（文件存在时向内追加文本）

3.  创建目录

使用 mkdir 创建目录，选项 `-p` 能够实现自动创建路径中不存在的目录，如果省略该选项，则新创建的伤及目录必须是已经存在的。

## 查看文件与搜索

1.  查看文件

    > 查看文件命令，常用的有 `cat` `less` `cat` 命令用于将文件全部读取并显示出来，`less` 可以在打开文件后随意浏览，支持上下翻页，用上下光标建滚动屏幕内容，pageup pagedown 翻页，q 键退出，

2.  搜索文件

    > 通过 find 命令可以根据搜索条件到指定路径下搜索文件，支持递归搜索子目录

    语法格式： find 搜索路径 [选项] 搜索关键字
    返回文件路径

    find 命令常用的选项有： -name -size -user 分别用于根据文件名称查找，文件大小查找，文件所有者查找

## 文件修改

> 文件修改操作包括重命名和移动路径，可以用 `mv` 命令完成

语法格式: mv 源文件或目录 目标文件或目录

1. 重命名文件

当源文件或目录存在，目标文件或目录不存在是，执行重命名操作

2. 移动文件

当目标文件是一个已经存在的目录时，会将源文件或目录移动到目标目录中

3. 移动并重命名文件

当源文件和目标文件不在同一个目录中时，如果目标文件不存在，则执行移动并重命名操作

4. 文件删除

文件删除包括 删除文件 和 删除目录，用`rm` 即可完成，rm 在无选项的情况下只能删除文件，不能删除目录，如果加上 `-r` 则递归删除指定目录，包括目录本身及其内部所有的文件以及子目录，若加上 `-f` 则强制执行删除操作

# 用户和权限

## 用户管理

### 添加用户

语法： useradd [选项] 用户名

useradd 常用选项

| 选项 | 省略时的默认值     | 说明                    |
| ---- | ------------------ | ----------------------- |
| -d   | /home/用户名       | 指定用户的加目录        |
| -c   | 空                 | 指定用户的备注名字      |
| -g   | 自动创建同名用户组 | 指定用户所属的基本组    |
| -G   | 无                 | 指定用户所属的附加组    |
| -r   | 否                 | 创建系统账号            |
| -s   | /bin/bash          | 指定用户登录的shell程序 |
| -u   | 从500开始          | 指定用户ID              |

直接创建用户 test 

useradd test

创建新用户liuxsen，指定其备注信息和所属组

useradd -c remark_info -g group_1 liuxsen

创建新用户test2，指定其用户ID，和所属组ID

useradd -u 1102 -g 503 test2


创建用户之后，在 `/etc/passwd` 文件中会添加新用户的记录
`liuxsen:x:1001:1001:liujianhui,,,:/home/liuxsen:/bin/bash`

passwd每一行是一个用户账户的信息，每个信息用 `:` 分割，这些信息供7项，分割是用户名、密码的占位、用户id、用户组id、备注信息、家目录、登录shell


### 设置密码

passwd 用户名 只有root身份可以用，普通用户执行passwd 只能修改自己的密码

### 删除用户

userdel [选项] 用户名

-r 用于在删除用户的时候，删除与其相关的所有文件，如用户的家目录，-f 用户强制删除用户，即使用户已经登录

## 用户组管理

> 系统中的每个用户必须属于一个基本用户组，可拥有多个附加用户组，使用useradd添加用户时，如果没有指定用户组，默认会为用户创建一个同名的用户组作为用户的基本组，使用userdel删除用户是，如果同名用户组中没有其他用户则会被自动清除，但是若同名用户组中有非该用户的情况除外；

### 添加用户组

`groupadd 选项 name`

-g 指定组ID 省略时，自动使用从500开始的递增值，选项 -r 表示创建系统用户组 ID小于500；
创建后使用tail 命令可以查看 /etc/group 文件中的用户组结果

### 删除用户组

`groupdel name`

**注意** 如果删除的组是某个用户的基本组，则无法删除，除非删除用户或者改变用户的基本组

改变用户所属组
usermod -g 组名 用户名

修改用户的附加组列表（多个组用 , 分割）

usermod -G group1,group2 username

向用户附加组里诶博爱中追加组（多个组用 , 分割）

usermod -a -G group1,group2 username

## 文件权限管理

> Linux中的用户对于文件有3中操作身份，文件所有者（owner）、文件所属组（group）、和其他人(other)、

**操作身份说明**

| 用户身份   | 字符代号 | 说明                                               |
| ---------- | -------- | -------------------------------------------------- |
| 文件所有者 | u        | 文件所有者对文件的权限（通常是用户自己创建的文件） |
| 文件所属组 | g        | 文件所属组中的用户对文件的权限                     |
| 其他人     | o        | 文件所有者，所属组以外的其他人对文件权限           |

**权限控制说明**

| 权限 | 字符代号 | 文件           | 目录                       |
| ---- | -------- | -------------- | -------------------------- |
| 读取 | r        | 可查看文件内容 | 可以列出目录中的内容       |
| 写入 | w        | 可修改文件内容 | 可以在目录中创建、删除文件 |
| 执行 | x        | 可执行文件     | 可以进入目录               |


### 查看文件权限 

`ll`

`drwxr-xr-x    5 liujianhui  staff   160B 12 29 18:55 scaffolds`

共划分为7个字段列表，文件类型与权限、文件硬链接数、文件所有者、文件所属组、文件占用空间、文件修改时间、文件名

文件类型和权限由10个字符组成，第一个字符代表文件类型，d标识目录，-表示普通文件。2-10标识权限控制，每3位一组，一次代表 所有者，所属组，其他人对文件的权限，每组的最高权限是 rwx(可读，可写，可执行)；


### 更改文件权限

**将权限设置为 rwxrwxrwx**

`chmod u+rwx,g+rwx,o+rwx test.md`

`chmod u=rwx,g=rwx,o=rwx test.md`

**更改文件所有者，所属组**

将文件的所有者改为 test

`chown test hello.md`

将文件所属组改为test

`chgrp test hello.md`



